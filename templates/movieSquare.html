<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>movieSquare</title>
	{% load static %}
    <link type="text/css" rel="stylesheet" href="{% static "css/movieSquare_base.css" %}">
	<link type="text/css" rel="stylesheet" href="{% static "css/movieSquare.css" %}">
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <style>
        .content_wrapper{
            margin-left: 0px;
        }

        .offset{
        	margin-left: -40px;
        }
    </style>
</head>
<!--<nav class="navbar-default navbar-fixed-top navbar-inverse" role="navigation">-->
<!--    <div>-->
<!--        &lt;!&ndash; Brand and toggle get grouped for better mobile display &ndash;&gt;-->
<!--        <div class="navbar-header">-->
<!--            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">-->
<!--                <span class="sr-only">Toggle navigation</span>-->
<!--                <span class="icon-bar"></span>-->
<!--                <span class="icon-bar"></span>-->
<!--                <span class="icon-bar"></span>-->
<!--            </button>-->
<!--            <a class="navbar-brand" href="index.html"> <span class="glyphicon glyphicon-shopping-cart"></span>  电影网站</a>-->
<!--        </div>-->
<!--        &lt;!&ndash; Collect the nav links, forms, and other content for toggling &ndash;&gt;-->
<!--        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">-->
<!--            <ul class="navbar-nav" style="margin-top: 3px">-->
<!--                <li><a href="index.html"> <span class="glyphicon glyphicon-home"></span>  首页</a></li>-->
<!--            </ul>-->
<!--            <form class="navbar-form navbar-left" role="search">-->
<!--                <div class="form-group">-->
<!--                    <input type="text" class="form-control" placeholder="找点新鲜玩意..." id="searchInput">-->
<!--                </div>-->
<!--                <input type="button" class="btn btn-default" onclick="jumpSearch()" value="Submit">-->
<!--            </form>-->
<!--            <div class="navbar-nav navbar-right">-->
<!--                <li><a href="{% url 'movieSquare' %}">广场</a></li>-->
<!--                <li class="dropdown" id="UserDropdown">-->
<!--                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="UserName">-->
<!--                        <span>我的</span>-->
<!--                        <b class="caret"></b>-->
<!--                    </a>-->
<!--                    <ul class="dropdown-menu">-->
<!--                        <li><a href="{% url 'selfPage' %}">个人主页</a></li>-->
<!--                        <li><a href="{% url 'login' %}" onclick="delCookie()">退出登录</a></li>-->
<!--                    </ul>-->
<!--                </li>-->
<!--                <li><a href="#" ></a></li>-->
<!--            </div>-->
<!--        </div>&lt;!&ndash; /.navbar-collapse &ndash;&gt;-->
<!--    </div>&lt;!&ndash;/.container-fluid &ndash;&gt;-->
<!--</nav>-->

<!--搜索框-->

<!--<div id="box">-->
<!--    <div class="glyphicon glyphicon-search"></div>-->
<!--    <input type="search" name="search" placeholder="请输入关键字">-->
<!--    <span id="search"><button class="btn btn-primary" onclick="">搜索</button></span>-->

<!--</div>-->
<div class="offset">
    <div class="index-header" id="index-header">
<!--		<div class="banner-wrap" style="background-image:url(https://cs.xinpianchang.com/app/user/html/stars/css/skin45/bg-big.jpg)">-->
<!--			<div class="banner-linear">-->
<!--				&lt;!&ndash; <img class="banner-img" src="https://cs.xinpianchang.com/app/user/html/stars/css/skin27/bg-big.jpg"> &ndash;&gt;-->

<!--				&lt;!&ndash; <div class="bannerbg" ></div>-->
<!--				 &ndash;&gt;-->
<!--				<span class="avator-wrap-s">-->
<!--					<img src="https://cs.xinpianchang.com/passport/default.png@290w_290h_1e_1c?id=1240823231">-->
<!--									</span>-->
<!--			</div>-->
<!--		</div>-->
	<ul class="rotate" id="rotate" style="list-style:none;margin-left:20px">
				<li class="rotate-item rotate-active">
			<img style="align: center;", src="https://cs.xinpianchang.com/app/user/html/stars/css/skin45/bg-big.jpg">
<!-- 			<img class="banner-img" src="https://cs.xinpianchang.com/app/user/html/stars/css/skin27/bg-big.jpg">-->
			<div class="rotate-tip" style="padding : 5px 0 0 20px">
				<h3>发现好看的电影</h3>
				<div class="rotate-text" style="text-indent:2em;font-size:20px;font-weight:bolder">尽享视觉盛宴，一切由此开启。</div>
			</div>
		</li>
</ul>
	<div class="index-wrap clearfix ease-in-out" id="index-wrap" style="position: absolute; opacity: 1; left: 0px; z-index: 2; top: 0px;">
		<div class="index-nav">
<!--			<a href="/" title="场库_最大的微电影平台" class="index-logo" id="index-logo"><img src="https://oss-xpc0.xpccdn.com/Upload/edu/2018/05/115af5482b2b4c9.png" alt="场库_最大的微电影平台"></a>-->
			<ul class="index-nav-list clearfix" style="list-style:none">
				<li><a> <span class="glyphicon glyphicon-film"></span>  电影网站</a></li>
				<li><a href="index.html"> <span class="glyphicon glyphicon-home"></span>  首页</a></li>
				<li><a href="{% url 'movieSquare' %}">广场</a></li>
				<li class="dropdown" id="UserDropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="UserName">
                        <span>我的</span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="{% url 'selfPage' %}">个人主页</a></li>
                        <li><a href="{% url 'login' %}" onclick="delCookie()">退出登录</a></li>
                    </ul>
                </li>
			</ul>
			<form class="index-search" id="search-form" role="search">
				<div class="glyphicon glyphicon-search"></div>
				<input type="search" name="search" placeholder="请输入关键字">
				<span id="search"><button class="btn btn-default" onclick="">Submit</button></span>
            </form>
		</div>
	</div>
</div>
</div>
    <div style="display:none">
        <h3>推荐</h3>
<!--        推荐-->
<!--        电影海报图,点击可以跳转-->
        <img src="">

        <div>Movie Name</div>
    </div>

<div class="content_wrapper" id="movieInfo">
<div class="col-xs-6 col-xs-offset-2" style="margin-left:320px">
<div class="index-tab">
			<a href="" class="sel">热门排行</a>
			<a href="" id="hot" class=" hot">最新推荐<span></span></a>
			<a href="" class="">星级精选</a>
			<a href="" class="">随便看看</a>
		</div>

    <ul class="index-list clearfix" id="post-list">
        <li class="clearfix" data-id="63114" v-for="movie in movies" style="">
	<a v-on:click="toMoviePage(movie.film_id)" class="index-img" style="width:200px;height:280px;padding: 27px 15px 0 0">
		<img v-bind:src="movie.picture">
<!--		<div class="bottom-cover">&lt;!&ndash; <span class="share-num">31111</span> &ndash;&gt;<span class="film-time">04:23</span></div>	-->
	</a>
	<div class="index-text">
		<h1><a v-on:click="toMoviePage(movie.film_id)" >[[movie.film_name]]</a>
		<a class="mark mark-blue curp">[[movie.film_date]]</a>																						</h1>
		<div class="index-con" style="margin-top:15px;margin-bottom:10px">
			上映地区：<a class="user">[[movie.film_area]]</a>
			<div class="rating" style="margin-left:50px">
				<div class="rating-holder">
					<span style="width:67.8px;"></span>
				</div>
				<span class="num">[[movie.film_score]].[[movie.film_score]]
				</span>
			</div>
		</div>
		<div class="index-intro" style="text-indent:2em;font-size:14px;line-height:200%">[[movie.introduction]]</div>
<!-- 		<div class="index-more"><a href="/63114?from=index_new" title="阅读重磅！2022 海军招飞宣传片《海选》全文" target="_blank">阅读全文...</a></div> -->
		<div class="index-like clearfix">
			<!--增加了频道显示-->
<!--			<span class="time">-->
<!--							</span>			<span class="time">共有[[movie.film_score_people]]人评分</span>-->
			<div class="post-ope">
				<span class="post-comment">共有[[movie.film_score_people]]人评分</span>
<!--				<span class="post-like">502</span>-->
<!--		        <a href="javascript:;" class="post-share-btn" id="post-share-btn">322</a>-->
			</div>
		</div>
	</div>
					<hr>
</li>

    </ul>
</div>
<div class="col-xs-offset-1 col-xs-2">
    <div style="display:none">
        <h3>电影热榜</h3>

        <ol>
            <li v-for="movie in movies"><a v-on:click="toMoviePage(movie.film_id)">[[movie.film_name]],[[movie.film_date]],[[movie.film_area]]</a>
            <img src="" id="picture">
            </li>

<!--            显示一些数据库的电影名称并可以跳转-->
        </ol>
    </div>

             <div style="display:none">
        <h3>我的收藏</h3>
<!--        热榜-->
                 <ol>
                    <li v-for="collectedMovie in collectedMovies"><a v-on:click="toMoviePage(collectedMovie.film_id)">[[collectedMovie.film_name]]</a></li>
                </ol>
    </div>
	</div>
</div>
<script>
        var vm = new Vue({
            el:"#movieInfo",
            delimiters:["[[","]]"],
            data:{
                movies:[],
                collectedMovies:[],
            },
            mounted:function () {
                this.showAll()
                this.show()
            },
            methods:{
                showAll() {
                    axios.get("{% url 'showAllMovies' %}").then(response=>{
                            this.movies = response.data["film_info"]
                        }),err=>{
                            console.log(err);
                        };
                },
                toSquare() {
                    window.location.href = "{% url 'movieSquare' %}"
                },
                toMoviePage(film_id) {
                    window.sessionStorage.setItem("film_id",film_id)
                    window.location.href = "{% url 'moviePage' %}"
                },
                show() {
                    axios.get("{% url 'show' %}",{
                            params:{
                                id:sessionStorage.getItem("id")
                            }
                        }).then(response=>{
                            this.collectedMovies = response.data["film_info"]
                        }),err=>{
                            console.log(err);
                        };
                },
            }
        })
</script>
</body>
</html>